const categorySchema = {
    type: "object",
    properties: {
        title: { title: "Name", type: "string" },
        description: { title: "Opis", type: "string" },
        category: { title: "Kategoria", type: "string", enum: ["uczelnia", "praca", "prywatne"] }
    }
};

export async function categorizeTask(title, description) {
    const jsonSchema = JSON.stringify(categorySchema, null, 4);

    try {
        const chatCompletion = await groq.chat.completions.create({
            messages: [
                {
                    role: "system",
                    content: `You are a categorization model that categorizes tasks into one of three categories: 'uczelnia', 'praca', or 'prywatne'. The input must conform to the following schema: ${jsonSchema}`
                },
                {
                    role: "user",
                    content: `Categorize the following task: Title: ${title}, Description: ${description}`,
                },
            ],
            model: "llama3-8b-8192",
            temperature: 0,
            response_format: { type: "json_object" }
        });

        const result = JSON.parse(chatCompletion.choices[0].message.content);
        return result.category;
    } catch (error) {
        console.error("Błąd w funkcji categorizeTask:", error);
    }
}

 const category = await categorizeTask(newTitle, newDescription);


GROQ_API_KEY=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